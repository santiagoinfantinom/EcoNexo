(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7276,e=>{"use strict";e.s(["default",()=>l]);var t=e.i(43476),a=e.i(71645),r=e.i(18071);let s=["Medio ambiente","Educación","Salud","Comunidad","Océanos","Alimentación"];function l(){var e,l;let{t:d,locale:o}=(0,r.useI18n)(),[i,c]=(0,a.useState)({title:"",date:"",city:"",country:"",category:"Medio ambiente",optionalCategories:[],capacity:void 0,notes:""}),[n,x]=(0,a.useState)(null),[b,g]=(0,a.useState)([]);a.default.useEffect(()=>{g(JSON.parse(localStorage.getItem("econexo:participatedEvents")||"[]"))},[]);let p=()=>{g(JSON.parse(localStorage.getItem("econexo:participatedEvents")||"[]"))};a.default.useEffect(()=>{let e=e=>{"econexo:participatedEvents"===e.key&&p()};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]);let m={"Medio ambiente":{bg:"bg-emerald-100",text:"text-emerald-800",border:"border-emerald-200"},Educación:{bg:"bg-indigo-100",text:"text-indigo-800",border:"border-indigo-200"},Salud:{bg:"bg-rose-100",text:"text-rose-800",border:"border-rose-200"},Comunidad:{bg:"bg-amber-100",text:"text-amber-900",border:"border-amber-200"},Océanos:{bg:"bg-cyan-100",text:"text-cyan-800",border:"border-cyan-200"},Alimentación:{bg:"bg-lime-100",text:"text-lime-800",border:"border-lime-200"}};function h(e,t){c(a=>({...a,[e]:t}))}async function u(e){e.preventDefault();try{let e=await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:i.title,date:i.date,city:i.city,country:i.country,category:i.category,optional_categories:i.optionalCategories,capacity:i.capacity,notes:i.notes})});if(!e.ok){console.warn("API not available, using mock data");let e={id:"mock_".concat(Date.now()),...i,created_at:new Date().toISOString()};x(e),g(t=>[e,...t]),c(e=>({...e,title:"",date:"",city:"",country:"",capacity:void 0,notes:""}));return}let t=await e.json();x(t),g(e=>[t,...e]);try{let e=await fetch("/api/events").then(e=>e.ok?e.json():[]);g(a=>{let r=Array.isArray(e)?e:[];return r.some(e=>e.id&&t.id&&e.id===t.id)?r:[t,...r]})}catch(e){}c(e=>({...e,title:"",date:"",city:"",country:"",capacity:void 0,notes:""}))}catch(e){console.error(e),x(i)}}return a.default.useEffect(()=>{(async()=>{try{let e=await fetch("/api/events");if(!e.ok){console.warn("API not available, using empty list"),g([]);return}let t=await e.json();g(Array.isArray(t)?t:[])}catch(e){console.warn("Failed to load events:",e),g([])}})()},[]),(0,t.jsxs)("div",{className:"grid gap-6 max-w-2xl mx-auto text-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-semibold",children:d("createEvent")}),(0,t.jsxs)("form",{onSubmit:u,className:"grid gap-4 mx-auto text-left max-w-xl",children:[(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[d("title")," (",d("required"),")"]}),(0,t.jsx)("input",{required:!0,className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",value:i.title,onChange:e=>h("title",e.target.value),placeholder:d("titlePh")})]}),(0,t.jsxs)("div",{className:"grid gap-1 sm:grid-cols-2 sm:gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[d("date")," (",d("required"),")"]}),(0,t.jsx)("input",{required:!0,type:"date",className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",value:i.date,onChange:e=>h("date",e.target.value)})]}),(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[d("mainCategory")," (",d("required"),")"]}),(0,t.jsx)("select",{className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",value:i.category,onChange:e=>h("category",e.target.value),children:s.map(e=>(0,t.jsx)("option",{value:e,children:(0,r.categoryLabel)(e,o)},e))})]})]}),(0,t.jsxs)("div",{className:"grid gap-1 sm:grid-cols-2 sm:gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[d("city")," (",d("required"),")"]}),(0,t.jsx)("input",{required:!0,className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",value:i.city,onChange:e=>h("city",e.target.value),placeholder:d("cityPh")})]}),(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[d("country")," (",d("required"),")"]}),(0,t.jsx)("input",{required:!0,className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",value:i.country,onChange:e=>h("country",e.target.value),placeholder:d("countryPh")})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:d("optionalCategories")}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 justify-center",children:s.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{h("optionalCategories",i.optionalCategories.includes(e)?i.optionalCategories.filter(t=>t!==e):[...i.optionalCategories,e])},className:"px-3 py-1 rounded-full border ".concat(i.optionalCategories.includes(e)?"bg-green-700 text-white":"".concat(m[e].bg," ").concat(m[e].text," ").concat(m[e].border)),children:(0,r.categoryLabel)(e,o)},e))})]}),(0,t.jsx)("div",{className:"grid gap-1 sm:grid-cols-2 sm:gap-4",children:(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[d("capacity")," (",d("optional"),")"]}),(0,t.jsx)("input",{type:"number",min:1,className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",value:null!=(e=i.capacity)?e:"",onChange:e=>h("capacity",Number(e.target.value)||void 0),placeholder:d("capacityPh")})]})}),(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[d("notes")," (",d("optional"),")"]}),(0,t.jsx)("textarea",{className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 min-h-24 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",value:null!=(l=i.notes)?l:"",onChange:e=>h("notes",e.target.value),placeholder:d("notesPh")})]}),(0,t.jsx)("button",{className:"bg-green-700 text-white rounded px-4 py-2 w-fit",children:d("save")})]}),n&&(0,t.jsxs)("div",{className:"border rounded p-4 bg-gray-900 text-white",children:[(0,t.jsx)("div",{className:"font-semibold mb-2",children:d("createdEvent")}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"font-semibold",children:n.title})," se realizará el ",(0,t.jsx)("span",{className:"font-semibold",children:n.date})," en ",(0,t.jsxs)("span",{className:"font-semibold",children:[n.city,", ",n.country]}),"."]})]}),(0,t.jsxs)("div",{className:"grid gap-3",children:[(0,t.jsx)("div",{className:"h-1 bg-gradient-to-r from-transparent via-green-600 to-transparent rounded-full"}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold",children:d("existingEvents")}),(0,t.jsx)("button",{onClick:p,className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700 transition-colors",children:"de"===o?"Aktualisieren":"en"===o?"Refresh":"Actualizar"})]}),(0,t.jsx)("div",{className:"overflow-auto border border-gray-300 dark:border-slate-600 rounded",children:(0,t.jsxs)("table",{className:"min-w-full text-sm",children:[(0,t.jsx)("thead",{className:"bg-gray-50 dark:bg-slate-700",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:d("title")}),(0,t.jsx)("th",{className:"text-left p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:d("date")}),(0,t.jsx)("th",{className:"text-left p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:d("city")}),(0,t.jsx)("th",{className:"text-left p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:d("country")}),(0,t.jsx)("th",{className:"text-left p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:d("category")}),(0,t.jsx)("th",{className:"text-left p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:d("capacity")})]})}),(0,t.jsx)("tbody",{children:0===b.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{className:"p-3 text-slate-500 dark:text-slate-400",colSpan:6,children:d("noParticipatedEvents")})}):b.map((e,a)=>{var s;return(0,t.jsxs)("tr",{className:"odd:bg-white even:bg-gray-50 dark:odd:bg-slate-800 dark:even:bg-slate-700",children:[(0,t.jsx)("td",{className:"p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:e.title}),(0,t.jsx)("td",{className:"p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:e.date}),(0,t.jsx)("td",{className:"p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:e.city}),(0,t.jsx)("td",{className:"p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:e.country}),(0,t.jsx)("td",{className:"p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:(0,r.categoryLabel)(e.category,o)}),(0,t.jsx)("td",{className:"p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:null!=(s=e.capacity)?s:"-"})]},a)})})]})})]})]})}}]);