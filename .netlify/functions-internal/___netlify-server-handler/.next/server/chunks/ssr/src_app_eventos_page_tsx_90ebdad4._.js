module.exports=[38949,a=>{"use strict";a.s(["default",()=>f]);var b=a.i(87924),c=a.i(72131),d=a.i(53407);let e=["Medio ambiente","Educación","Salud","Comunidad","Océanos","Alimentación"];function f(){let{t:a,locale:f}=(0,d.useI18n)(),[g,h]=(0,c.useState)({title:"",date:"",city:"",country:"",address:"",website:"",image_url:"",category:"Medio ambiente",optionalCategories:[],capacity:void 0,notes:""}),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)([]);c.default.useEffect(()=>{l(JSON.parse(localStorage.getItem("econexo:participatedEvents")||"[]"))},[]);let m=()=>{l(JSON.parse(localStorage.getItem("econexo:participatedEvents")||"[]"))};c.default.useEffect(()=>{let a=a=>{"econexo:participatedEvents"===a.key&&m()};return window.addEventListener("storage",a),()=>window.removeEventListener("storage",a)},[]);let n={"Medio ambiente":{bg:"bg-emerald-100",text:"text-emerald-800",border:"border-emerald-200"},Educación:{bg:"bg-indigo-100",text:"text-indigo-800",border:"border-indigo-200"},Salud:{bg:"bg-rose-100",text:"text-rose-800",border:"border-rose-200"},Comunidad:{bg:"bg-amber-100",text:"text-amber-900",border:"border-amber-200"},Océanos:{bg:"bg-cyan-100",text:"text-cyan-800",border:"border-cyan-200"},Alimentación:{bg:"bg-lime-100",text:"text-lime-800",border:"border-lime-200"}};function o(a,b){h(c=>({...c,[a]:b}))}async function p(a){a.preventDefault();try{let a=await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:g.title,date:g.date,city:g.city,country:g.country,address:g.address,website:g.website||void 0,image_url:g.image_url||void 0,category:g.category,optional_categories:g.optionalCategories,capacity:g.capacity,notes:g.notes})});if(!a.ok){console.warn("API not available, using mock data");let a={id:`mock_${Date.now()}`,...g,created_at:new Date().toISOString()};j(a),l(b=>[a,...b]),h(a=>({...a,title:"",date:"",city:"",country:"",address:"",website:"",image_url:"",capacity:void 0,notes:""}));return}let b=await a.json();j(b),l(a=>[b,...a]);try{let a=await fetch("/api/events").then(a=>a.ok?a.json():[]);l(c=>{let d=Array.isArray(a)?a:[];return d.some(a=>a.id&&b.id&&a.id===b.id)?d:[b,...d]})}catch{}h(a=>({...a,title:"",date:"",city:"",country:"",address:"",website:"",image_url:"",capacity:void 0,notes:""}))}catch(a){console.error(a),j(g)}}return c.default.useEffect(()=>{(async()=>{try{let a=await fetch("/api/events");if(!a.ok){console.warn("API not available, using empty list"),l([]);return}let b=await a.json();l(Array.isArray(b)?b:[])}catch(a){console.warn("Failed to load events:",a),l([])}})()},[]),(0,b.jsxs)("div",{className:"grid gap-6 max-w-2xl mx-auto text-center",children:[(0,b.jsx)("h1",{className:"text-3xl font-semibold",children:a("createEvent")}),(0,b.jsxs)("form",{onSubmit:p,className:"grid gap-4 mx-auto text-left max-w-xl",children:[(0,b.jsxs)("div",{className:"grid gap-1",children:[(0,b.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[a("title")," (",a("required"),")"]}),(0,b.jsx)("input",{required:!0,className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",value:g.title,onChange:a=>o("title",a.target.value),placeholder:a("titlePh")})]}),(0,b.jsxs)("div",{className:"grid gap-1 sm:grid-cols-2 sm:gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-1",children:[(0,b.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[a("date")," (",a("required"),")"]}),(0,b.jsx)("input",{required:!0,type:"date",className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",value:g.date,onChange:a=>o("date",a.target.value)})]}),(0,b.jsxs)("div",{className:"grid gap-1",children:[(0,b.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[a("mainCategory")," (",a("required"),")"]}),(0,b.jsx)("select",{className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",value:g.category,onChange:a=>o("category",a.target.value),children:e.map(a=>(0,b.jsx)("option",{value:a,children:(0,d.categoryLabel)(a,f)},a))})]})]}),(0,b.jsxs)("div",{className:"grid gap-1 sm:grid-cols-2 sm:gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-1",children:[(0,b.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[a("city")," (",a("required"),")"]}),(0,b.jsx)("input",{required:!0,className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",value:g.city,onChange:a=>o("city",a.target.value),placeholder:a("cityPh")})]}),(0,b.jsxs)("div",{className:"grid gap-1",children:[(0,b.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[a("country")," (",a("required"),")"]}),(0,b.jsx)("input",{required:!0,className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",value:g.country,onChange:a=>o("country",a.target.value),placeholder:a("countryPh")})]})]}),(0,b.jsxs)("div",{className:"grid gap-1",children:[(0,b.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[a("address")," (",a("optional"),")"]}),(0,b.jsx)("input",{className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",value:g.address??"",onChange:a=>o("address",a.target.value),placeholder:a("addressPh")})]}),(0,b.jsxs)("div",{className:"grid gap-1",children:[(0,b.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:["Website (",a("optional"),")"]}),(0,b.jsx)("input",{type:"url",className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",value:g.website??"",onChange:a=>o("website",a.target.value),placeholder:a("websitePlaceholder"+f.charAt(0).toUpperCase()+f.slice(1))})]}),(0,b.jsxs)("div",{className:"grid gap-1",children:[(0,b.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[a("image")," URL (",a("optional"),")"]}),(0,b.jsx)("input",{type:"url",className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",value:g.image_url??"",onChange:a=>o("image_url",a.target.value),placeholder:a("imageUrlPlaceholder"+f.charAt(0).toUpperCase()+f.slice(1))})]}),(0,b.jsxs)("div",{className:"grid gap-1",children:[(0,b.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[a("image")," JPG (",a("optional"),")"]}),(0,b.jsx)("input",{type:"file",accept:"image/jpeg",className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",onChange:a=>{let b=a.target.files?.[0];if(!b)return;let c=new FileReader;c.onload=()=>{o("image_url","string"==typeof c.result?c.result:"")},c.readAsDataURL(b)}}),g.image_url&&(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:a("previewLabel")}),(0,b.jsx)("div",{className:"w-full h-40 overflow-hidden rounded border border-gray-300 dark:border-slate-600",children:(0,b.jsx)("img",{src:g.image_url,alt:"preview",className:"w-full h-full object-cover",loading:"lazy",referrerPolicy:"no-referrer",decoding:"async",crossOrigin:"anonymous"})})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:a("optionalCategories")}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 justify-center",children:e.map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>{o("optionalCategories",g.optionalCategories.includes(a)?g.optionalCategories.filter(b=>b!==a):[...g.optionalCategories,a])},className:`px-3 py-1 rounded-full border ${g.optionalCategories.includes(a)?"bg-green-700 text-white":`${n[a].bg} ${n[a].text} ${n[a].border}`}`,children:(0,d.categoryLabel)(a,f)},a))})]}),(0,b.jsx)("div",{className:"grid gap-1 sm:grid-cols-2 sm:gap-4",children:(0,b.jsxs)("div",{className:"grid gap-1",children:[(0,b.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[a("capacity")," (",a("optional"),")"]}),(0,b.jsx)("input",{type:"number",min:1,className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",value:g.capacity??"",onChange:a=>o("capacity",Number(a.target.value)||void 0),placeholder:a("capacityPh")})]})}),(0,b.jsxs)("div",{className:"grid gap-1",children:[(0,b.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[a("notes")," (",a("optional"),")"]}),(0,b.jsx)("textarea",{className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 min-h-24 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",value:g.notes??"",onChange:a=>o("notes",a.target.value),placeholder:a("notesPh")})]}),(0,b.jsx)("button",{className:"bg-green-700 text-white rounded px-4 py-2 w-fit",children:a("save")})]}),i&&(0,b.jsxs)("div",{className:"border rounded p-4 bg-gray-900 text-white",children:[(0,b.jsx)("div",{className:"font-semibold mb-2",children:a("createdEvent")}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("span",{className:"font-semibold",children:i.title})," ",a("eventCreatedMessage")," ",(0,b.jsx)("span",{className:"font-semibold",children:i.date})," en ",(0,b.jsxs)("span",{className:"font-semibold",children:[i.city,", ",i.country]}),i.address?`, ${i.address}`:"","."]})]}),(0,b.jsxs)("div",{className:"grid gap-3",children:[(0,b.jsx)("div",{className:"h-1 bg-gradient-to-r from-transparent via-green-600 to-transparent rounded-full"}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold",children:a("existingEvents")}),(0,b.jsx)("button",{onClick:m,className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700 transition-colors",children:a("refresh")})]}),(0,b.jsx)("div",{className:"overflow-auto border border-gray-300 dark:border-slate-600 rounded",children:(0,b.jsxs)("table",{className:"min-w-full text-sm",children:[(0,b.jsx)("thead",{className:"bg-gray-50 dark:bg-slate-700",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:a("title")}),(0,b.jsx)("th",{className:"text-left p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:a("date")}),(0,b.jsx)("th",{className:"text-left p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:a("city")}),(0,b.jsx)("th",{className:"text-left p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:a("country")}),(0,b.jsx)("th",{className:"text-left p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:a("category")}),(0,b.jsx)("th",{className:"text-left p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:a("capacity")})]})}),(0,b.jsx)("tbody",{children:0===k.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{className:"p-3 text-slate-500 dark:text-slate-400",colSpan:6,children:a("noParticipatedEvents")})}):k.map((a,c)=>(0,b.jsxs)("tr",{className:"odd:bg-white even:bg-gray-50 dark:odd:bg-slate-800 dark:even:bg-slate-700",children:[(0,b.jsx)("td",{className:"p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:a.title}),(0,b.jsx)("td",{className:"p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:a.date}),(0,b.jsx)("td",{className:"p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:a.city}),(0,b.jsx)("td",{className:"p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:a.country}),(0,b.jsx)("td",{className:"p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:(0,d.categoryLabel)(a.category,f)}),(0,b.jsx)("td",{className:"p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:a.capacity??"-"})]},c))})]})})]})]})}}];

//# sourceMappingURL=src_app_eventos_page_tsx_90ebdad4._.js.map