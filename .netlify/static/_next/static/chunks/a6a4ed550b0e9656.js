(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,42836,e=>{"use strict";e.s(["default",()=>s]);var a=e.i(43476),l=e.i(71645),r=e.i(84515);function s(){var e,s,t,i,n,c,d;let[u,o]=(0,l.useState)([]),[g,m]=(0,l.useState)({}),[p,h]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{if(!(0,r.isSupabaseConfigured)())return;let e=(0,r.getSupabase)(),{data:a,error:l}=await e.from("projects").select("id,name,category,lat,lng,city,country").order("created_at",{ascending:!1});!l&&a&&o(a)})()},[]);let v=async()=>{var e;if(h(null),!(0,r.isSupabaseConfigured)())return void h("Supabase no configurado");let a=(0,r.getSupabase)(),l={...g,id:null==(e=g.id)?void 0:e.trim()};if(!l.id||!l.name)return void h("id y name son requeridos");let{data:s,error:t}=await a.from("projects").upsert(l).select("*");if(t)return void h(t.message);o(e=>[s[0],...e.filter(e=>e.id!==l.id)]),m({})};return(0,a.jsxs)("div",{className:"max-w-3xl mx-auto p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Admin · Projects"}),!(0,r.isSupabaseConfigured)()&&(0,a.jsx)("div",{className:"mb-4 text-sm",children:"Configura NEXT_PUBLIC_SUPABASE_URL y NEXT_PUBLIC_SUPABASE_ANON_KEY para habilitar el admin."}),(0,a.jsxs)("div",{className:"grid gap-2 mb-6",children:[(0,a.jsx)("input",{placeholder:"id",className:"border p-2",value:null!=(e=g.id)?e:"",onChange:e=>m(a=>({...a,id:e.target.value}))}),(0,a.jsx)("input",{placeholder:"name",className:"border p-2",value:null!=(s=g.name)?s:"",onChange:e=>m(a=>({...a,name:e.target.value}))}),(0,a.jsx)("input",{placeholder:"category",className:"border p-2",value:null!=(t=g.category)?t:"",onChange:e=>m(a=>({...a,category:e.target.value}))}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)("input",{placeholder:"lat",className:"border p-2",value:null!=(i=g.lat)?i:"",onChange:e=>m(a=>({...a,lat:Number(e.target.value)}))}),(0,a.jsx)("input",{placeholder:"lng",className:"border p-2",value:null!=(n=g.lng)?n:"",onChange:e=>m(a=>({...a,lng:Number(e.target.value)}))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)("input",{placeholder:"city",className:"border p-2",value:null!=(c=g.city)?c:"",onChange:e=>m(a=>({...a,city:e.target.value}))}),(0,a.jsx)("input",{placeholder:"country",className:"border p-2",value:null!=(d=g.country)?d:"",onChange:e=>m(a=>({...a,country:e.target.value}))})]}),(0,a.jsx)("button",{className:"btn-gls-primary w-fit",onClick:v,children:"Guardar"}),p&&(0,a.jsx)("div",{className:"text-rose-700",children:p})]}),(0,a.jsx)("ul",{className:"grid gap-2",children:u.map(e=>(0,a.jsxs)("li",{className:"border p-3 rounded flex justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[e.category," · ",e.city,", ",e.country]})]}),(0,a.jsx)("a",{className:"text-green-700 underline",href:"/projects/".concat(e.id),children:"ver"})]},e.id))})]})}}]);