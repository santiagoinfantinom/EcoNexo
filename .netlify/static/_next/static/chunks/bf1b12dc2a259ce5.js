(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7276,e=>{"use strict";e.s(["default",()=>l]);var t=e.i(43476),a=e.i(71645),r=e.i(18071);let s=["Medio ambiente","Educación","Salud","Comunidad","Océanos","Alimentación"];function l(){var e,l,d,i,o;let{t:c,locale:n}=(0,r.useI18n)(),[x,b]=(0,a.useState)({title:"",date:"",city:"",country:"",address:"",website:"",image_url:"",category:"Medio ambiente",optionalCategories:[],capacity:void 0,notes:""}),[g,p]=(0,a.useState)(null),[m,h]=(0,a.useState)([]);a.default.useEffect(()=>{h(JSON.parse(localStorage.getItem("econexo:participatedEvents")||"[]"))},[]);let u=()=>{h(JSON.parse(localStorage.getItem("econexo:participatedEvents")||"[]"))};a.default.useEffect(()=>{let e=e=>{"econexo:participatedEvents"===e.key&&u()};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]);let y={"Medio ambiente":{bg:"bg-emerald-100",text:"text-emerald-800",border:"border-emerald-200"},Educación:{bg:"bg-indigo-100",text:"text-indigo-800",border:"border-indigo-200"},Salud:{bg:"bg-rose-100",text:"text-rose-800",border:"border-rose-200"},Comunidad:{bg:"bg-amber-100",text:"text-amber-900",border:"border-amber-200"},Océanos:{bg:"bg-cyan-100",text:"text-cyan-800",border:"border-cyan-200"},Alimentación:{bg:"bg-lime-100",text:"text-lime-800",border:"border-lime-200"}};function k(e,t){b(a=>({...a,[e]:t}))}async function j(e){e.preventDefault();try{let e=await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:x.title,date:x.date,city:x.city,country:x.country,address:x.address,website:x.website||void 0,image_url:x.image_url||void 0,category:x.category,optional_categories:x.optionalCategories,capacity:x.capacity,notes:x.notes})});if(!e.ok){console.warn("API not available, using mock data");let e={id:"mock_".concat(Date.now()),...x,created_at:new Date().toISOString()};p(e),h(t=>[e,...t]),b(e=>({...e,title:"",date:"",city:"",country:"",address:"",website:"",image_url:"",capacity:void 0,notes:""}));return}let t=await e.json();p(t),h(e=>[t,...e]);try{let e=await fetch("/api/events").then(e=>e.ok?e.json():[]);h(a=>{let r=Array.isArray(e)?e:[];return r.some(e=>e.id&&t.id&&e.id===t.id)?r:[t,...r]})}catch(e){}b(e=>({...e,title:"",date:"",city:"",country:"",address:"",website:"",image_url:"",capacity:void 0,notes:""}))}catch(e){console.error(e),p(x)}}return a.default.useEffect(()=>{(async()=>{try{let e=await fetch("/api/events");if(!e.ok){console.warn("API not available, using empty list"),h([]);return}let t=await e.json();h(Array.isArray(t)?t:[])}catch(e){console.warn("Failed to load events:",e),h([])}})()},[]),(0,t.jsxs)("div",{className:"grid gap-6 max-w-2xl mx-auto text-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-semibold",children:c("createEvent")}),(0,t.jsxs)("form",{onSubmit:j,className:"grid gap-4 mx-auto text-left max-w-xl",children:[(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[c("title")," (",c("required"),")"]}),(0,t.jsx)("input",{required:!0,className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",value:x.title,onChange:e=>k("title",e.target.value),placeholder:c("titlePh")})]}),(0,t.jsxs)("div",{className:"grid gap-1 sm:grid-cols-2 sm:gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[c("date")," (",c("required"),")"]}),(0,t.jsx)("input",{required:!0,type:"date",className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",value:x.date,onChange:e=>k("date",e.target.value)})]}),(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[c("mainCategory")," (",c("required"),")"]}),(0,t.jsx)("select",{className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",value:x.category,onChange:e=>k("category",e.target.value),children:s.map(e=>(0,t.jsx)("option",{value:e,children:(0,r.categoryLabel)(e,n)},e))})]})]}),(0,t.jsxs)("div",{className:"grid gap-1 sm:grid-cols-2 sm:gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[c("city")," (",c("required"),")"]}),(0,t.jsx)("input",{required:!0,className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",value:x.city,onChange:e=>k("city",e.target.value),placeholder:c("cityPh")})]}),(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[c("country")," (",c("required"),")"]}),(0,t.jsx)("input",{required:!0,className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",value:x.country,onChange:e=>k("country",e.target.value),placeholder:c("countryPh")})]})]}),(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[c("address")," (",c("optional"),")"]}),(0,t.jsx)("input",{className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",value:null!=(e=x.address)?e:"",onChange:e=>k("address",e.target.value),placeholder:c("addressPh")})]}),(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:["Website (",c("optional"),")"]}),(0,t.jsx)("input",{type:"url",className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",value:null!=(l=x.website)?l:"",onChange:e=>k("website",e.target.value),placeholder:c("websitePlaceholder"+n.charAt(0).toUpperCase()+n.slice(1))})]}),(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[c("image")," URL (",c("optional"),")"]}),(0,t.jsx)("input",{type:"url",className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",value:null!=(d=x.image_url)?d:"",onChange:e=>k("image_url",e.target.value),placeholder:c("imageUrlPlaceholder"+n.charAt(0).toUpperCase()+n.slice(1))})]}),(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[c("image")," JPG (",c("optional"),")"]}),(0,t.jsx)("input",{type:"file",accept:"image/jpeg",className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(!a)return;let r=new FileReader;r.onload=()=>{k("image_url","string"==typeof r.result?r.result:"")},r.readAsDataURL(a)}}),x.image_url&&(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:c("previewLabel")}),(0,t.jsx)("div",{className:"w-full h-40 overflow-hidden rounded border border-gray-300 dark:border-slate-600",children:(0,t.jsx)("img",{src:x.image_url,alt:"preview",className:"w-full h-full object-cover",loading:"lazy",referrerPolicy:"no-referrer",decoding:"async",crossOrigin:"anonymous"})})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:c("optionalCategories")}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 justify-center",children:s.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{k("optionalCategories",x.optionalCategories.includes(e)?x.optionalCategories.filter(t=>t!==e):[...x.optionalCategories,e])},className:"px-3 py-1 rounded-full border ".concat(x.optionalCategories.includes(e)?"bg-green-700 text-white":"".concat(y[e].bg," ").concat(y[e].text," ").concat(y[e].border)),children:(0,r.categoryLabel)(e,n)},e))})]}),(0,t.jsx)("div",{className:"grid gap-1 sm:grid-cols-2 sm:gap-4",children:(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[c("capacity")," (",c("optional"),")"]}),(0,t.jsx)("input",{type:"number",min:1,className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",value:null!=(i=x.capacity)?i:"",onChange:e=>k("capacity",Number(e.target.value)||void 0),placeholder:c("capacityPh")})]})}),(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsxs)("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:[c("notes")," (",c("optional"),")"]}),(0,t.jsx)("textarea",{className:"border border-gray-300 dark:border-slate-600 rounded px-3 py-2 min-h-24 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",value:null!=(o=x.notes)?o:"",onChange:e=>k("notes",e.target.value),placeholder:c("notesPh")})]}),(0,t.jsx)("button",{className:"bg-green-700 text-white rounded px-4 py-2 w-fit",children:c("save")})]}),g&&(0,t.jsxs)("div",{className:"border rounded p-4 bg-gray-900 text-white",children:[(0,t.jsx)("div",{className:"font-semibold mb-2",children:c("createdEvent")}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"font-semibold",children:g.title})," ",c("eventCreatedMessage")," ",(0,t.jsx)("span",{className:"font-semibold",children:g.date})," en ",(0,t.jsxs)("span",{className:"font-semibold",children:[g.city,", ",g.country]}),g.address?", ".concat(g.address):"","."]})]}),(0,t.jsxs)("div",{className:"grid gap-3",children:[(0,t.jsx)("div",{className:"h-1 bg-gradient-to-r from-transparent via-green-600 to-transparent rounded-full"}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold",children:c("existingEvents")}),(0,t.jsx)("button",{onClick:u,className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700 transition-colors",children:c("refresh")})]}),(0,t.jsx)("div",{className:"overflow-auto border border-gray-300 dark:border-slate-600 rounded",children:(0,t.jsxs)("table",{className:"min-w-full text-sm",children:[(0,t.jsx)("thead",{className:"bg-gray-50 dark:bg-slate-700",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:c("title")}),(0,t.jsx)("th",{className:"text-left p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:c("date")}),(0,t.jsx)("th",{className:"text-left p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:c("city")}),(0,t.jsx)("th",{className:"text-left p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:c("country")}),(0,t.jsx)("th",{className:"text-left p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:c("category")}),(0,t.jsx)("th",{className:"text-left p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:c("capacity")})]})}),(0,t.jsx)("tbody",{children:0===m.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{className:"p-3 text-slate-500 dark:text-slate-400",colSpan:6,children:c("noParticipatedEvents")})}):m.map((e,a)=>{var s;return(0,t.jsxs)("tr",{className:"odd:bg-white even:bg-gray-50 dark:odd:bg-slate-800 dark:even:bg-slate-700",children:[(0,t.jsx)("td",{className:"p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:e.title}),(0,t.jsx)("td",{className:"p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:e.date}),(0,t.jsx)("td",{className:"p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:e.city}),(0,t.jsx)("td",{className:"p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:e.country}),(0,t.jsx)("td",{className:"p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:(0,r.categoryLabel)(e.category,n)}),(0,t.jsx)("td",{className:"p-2 border-b border-gray-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:null!=(s=e.capacity)?s:"-"})]},a)})})]})})]})]})}}]);